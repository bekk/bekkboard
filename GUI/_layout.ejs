<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="global.css">
<script id="scoreTemplate" type="text/ractive">
  <div class="score-half">
    {{#draw}}
      <div>
        <h2 class="draw">Draw!</h2>
      </div>
    {{/draw}}
    {{#winner}}
      <div>
        <h2 class="winner winner-name">{{winner}}!</h2>
      </div>
    {{/winner}}
    {{#started}}
      <div class="time-remaining">{{timeRemaining}}</div>
      <div class="vs">
        <div class="vs-score">
          <span class="vs-score-a">{{score.a}}</span>
          <span class="vs-score-sep">-</span>
          <span class="vs-score-b">{{score.b}}</span>
        </div>
        <div class="vs-players">
          <span class="vs-players-a">{{players.a.name}}</span>
          <span class="vs-players-b">{{players.b.name}}</span>
        </div>
      </div>
    {{/started}}
  </div>
  <div class="score-half score-half--bordered">
    <ul>
    {{^ranking}}
      <li>No players, yet!</li>
    {{/ranking}}
    {{#ranking}}
      <li class="rank">
        <span class="rank-player">{{player.name}}</span>
        <span class="rank-number">{{player.number}}</span>
        <span class="rank-rating">{{rating}}</span>
      </li>
    {{/ranking}}
    </ul>
  </div>
</script>
<script id="adminTemplate" type="text/ractive">
  <ul class="players">
    {{^players}}
      <li>No players</li>
    {{/started}}

      {{#each players:i}}
        <li class="player">
          <input id="player-name-{{i}}" type="checkbox" checked="{{.checked}}">
          <label for="player-name-{{i}}" class="player-name" on-click="playerClicked:{{i}}">
            {{name}}
            <span class="player-number">{{number}}</span>
            <span class="player-name-remove" on-click="remove:{{i}}">X</span>
          </label>
        </li>
      {{/each}}
    </ul>

    <div class="admin-buttons">
      {{^started}}
        <button class="button button--start button--center" on-click="start">Start</button>
      {{/started}}

      {{#started}}
        <button class="button button--stop button--center" on-click="stop">Stop</button>
      {{/started}}
    </div>
  </script>

  <script id="matchesTemplate" type="text/ractive">
    <ul>
      {{^matches}}
        <li>No matches, yet!</li>
      {{/matches}}
      {{#matches}}
        {{#editing}}
          <input type="text" name="score-a" value="{{score.a}}"/>
          <input type="text" name="score-b" value="{{score.b}}"/>
          <input type="submit" on-click="save" value="Save"/>
        {{/editing}}
        {{^editing}}
          <li on-dblclick="edit">{{score.a}} ({{players.a.name}}) vs. {{score.b}} ({{players.b.name}})</li>
        {{/editing}}
      {{/matches}}
    </ul>
  </script>
</head>
  <body>
    <script src="console.js"></script>
    <script src="jquery.min.js"></script>
    <script src="ractive.min.js"></script>
    <script src="api.js"></script>
    <script src="es.js"></script>
    <%- yield %>
    <script>ES.connect();</script>
    <script>
      ES.on('connected', function () {
        $('.score').addClass('score--connected');
        $('.score').removeClass('score--disconnected');
      });
      ES.on('disconnected', function () {
        $('.score').addClass('score--disconnected');
        $('.score').removeClass('score--connected');
      });
    </script>
  </body>
</html>
