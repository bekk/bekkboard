<link rel="stylesheet" type="text/css" href="signup.css">
<form method="post" class="signup" autocomplete="off">
  <label class="signup-field">
    <div class="signup-field-wrap">
      <div class="signup-field-confirmed">You're on!</div>
      <input type="text" class="signup-field-number" placeholder="What's your number?">
      <input type="text" class="signup-field-name" placeholder="Who wants to play?">
    </div>
  </label>
  <input type="submit" style="visiblity:hidden;position:absolute;top:-100px;"/>
</form>

<script>
  var $form      = $('.signup'),
      $confirmed = $('.signup-field-confirmed'),
      $number    = $('.signup-field-number'),
      $name      = $('.signup-field-name');

  $number.focus();

  $number.keyup(function () {
    API.getName($number.val(), function (user) {
      if (user && user.name) {
        $name.val(user.name);
      }
      else {
        $name.val("");
      }
    });
  });

  $form.submit(function submit (e) {
    var number = $.trim($number.val()),
        name   = $.trim($name.val());

    if (!number || !name) {
      return false;
    }

    $confirmed.addClass('confirmed--flash');
    setTimeout(function () {
      $confirmed.removeClass('confirmed--flash');
    }, 900);

    API.signUp(number, name);
    $number.val("");
    $name.val("");
    $number.focus();
    return false;
  });

</script>
